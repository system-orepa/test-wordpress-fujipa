{"version":3,"sources":["public-notice.js"],"names":["jQuery","document","ready","$","window","GianSays","divs","str","pushMsg","msg","className","div","addClass","find","html","replace","this","push","grabMessage","i","key_name","messages","Cookies","getJSON","j","k","length","remove","path","flushMessage","$container","each","index","append","click","e","preventDefault","removeClass","effect","setTimeout","fadeOut","confirm","$btn","message","attr","labels","split","confirmDialog","url","list","map","item","join","$markup","GianismHelper","confirmLabel","btnCancel","btnConfirm","on","hasClass","location","href","match","exec","hash"],"mappings":"AAQAA,OAAOC,UAAUC,MAAM,SAASC,GAE5B,YAEAC,QAAOC,UACHC,QACAC,KAAM,UAAW,SACjBC,QAAS,SAASC,EAAKC,GACnB,GAAIC,GAAMR,EAAE,qBACZQ,GAAIC,SAASF,GAAWG,KAAK,KAAKC,KAAML,EAAIM,QAAS,MAAO,MAC5DC,KAAKV,KAAKW,KAAKN,IAEnBO,YAAa,WACT,IAAK,GAAIC,GAAI,EAAGA,EAAI,EAAGA,IAAI,CACvB,GAAIC,GAAW,WAAaJ,KAAKT,IAAIY,GACjCE,EAAWC,QAAQC,QAAQH,EAC/B,IAAIC,EAAU,CAEV,IAAI,GAAIG,GAAI,EAAGC,EAAIJ,EAASK,OAAQF,EAAIC,EAAGD,IACvCR,KAAKR,QAASa,EAASG,GAAIR,KAAKT,IAAIY,GAGxCG,SAAQK,OAAOP,GACXQ,KAAM,SAKtBC,aAAc,WACV,GAAKb,KAAKV,KAAKoB,OAAS,CAEpB,GAAII,GAAa3B,EAAE,yCACnBA,GAAE4B,KAAKf,KAAKV,KAAM,SAAS0B,EAAOrB,GAE9BmB,EAAWG,OAAOtB,GAElBR,EAAEQ,GAAKsB,OAAO,wEAAwEC,MAAM,SAASC,GACjGA,EAAEC,iBACFjC,EAAEQ,GAAKgB,WAGXxB,EAAE,QAAQ8B,OAAOH,GAEjBA,EAAWO,YAAY,UAAUxB,KAAK,0BAA0ByB,OAAO,eAAiB,IAAM,WAC1FC,WAAW,WACPT,EAAWU,QAAQ,IAAM,WACrBrC,EAAEa,MAAMW,YAEb,UAGXX,KAAKL,SAGb8B,QAAS,SAASN,GACd,GAAIO,GAAOvC,EAAEa,MACT2B,EAAUD,EAAKE,KAAK,6BACpBC,EAAUH,EAAKE,KAAK,uBAAuBE,MAAM,IACrDX,GAAEC,iBACF/B,SAAS0C,cAAeJ,EAASE,EAAQH,EAAKE,KAAK,UAEvDG,cAAe,SAAUJ,EAASE,EAAQG,GACxC,GAAIC,GAAO9C,EAAE+C,IAAIL,EAAQ,SAASM,EAAMnB,GACpC,MAAO,OAASmB,EAAO,UACxBC,KAAK,IACJC,EAAUlD,EAAE,mGAE0BmD,cAAcC,aAAe,6CAEtDZ,EAAU,WACTM,EAAO,mEAGSK,cAAcE,UAAY,oCACvBF,cAAcG,WAAa,8BAIhEtD,GAAE,QAAQ8B,OAAOoB,GACjBA,EAAQK,GAAG,QAAS,SAAU,WACvBvD,EAAEa,MAAM2C,SAAS,QAChBN,EAAQ1B,SACHxB,EAAEa,MAAM2C,SAAS,aACtBvD,OAAOwD,SAASC,KAAOb,OAOrC3C,SAASa,cACTb,SAASwB,cAGT,IAAIiC,GAAQ,wCAAwCC,KAAK3D,OAAOwD,SAASI,KACtEF,KACCzD,SAASG,QAAQ,+CAAgDsD,EAAM,IACvEzD,SAASwB,gBAIb1B,EAAE,0CAA0C+B,MAAM7B,SAASoC","file":"../public-notice.js","sourcesContent":["/**\n * Read message from cookie\n */\n\n/*global Cookies:false*/\n/*global GianSays:true*/\n/*global GianismHelper: false*/\n\njQuery(document).ready(function($){\n\n    'use strict';\n\n    window.GianSays = {\n        divs: [],\n        str: ['updated', 'error'],\n        pushMsg: function(msg, className){\n            var div = $('<div><p></p></div>');\n            div.addClass(className).find('p').html( msg.replace( /\\+/g, ' ' ) );\n            this.divs.push(div);\n        },\n        grabMessage: function(){\n            for( var i = 0; i < 2; i++){\n                var key_name = 'gianism_' + this.str[i],\n                    messages = Cookies.getJSON(key_name);\n                if( messages ){\n                    // Message exists.\n                    for(var j = 0, k = messages.length; j < k; j++){\n                        this.pushMsg( messages[j], this.str[i] );\n                    }\n                    // Delete cookie\n                    Cookies.remove(key_name, {\n                        path: '/'\n                    });\n                }\n            }\n        },\n        flushMessage: function(){\n            if ( this.divs.length ) {\n                // Add all div\n                var $container = $('<div class=\"wpg-notices toggle\"></div>');\n                $.each(this.divs, function(index, div){\n                    // Append each div to container.\n                    $container.append(div);\n                    // Append close button\n                    $(div).append('<a href=\"#close\" class=\"close-btn\"><i class=\"lsf lsf-close\"></i></a>').click(function(e){\n                        e.preventDefault();\n                        $(div).remove();\n                    });\n                    // Add container to footer.\n                    $('body').append($container);\n                    // Fade in, then\n                    $container.removeClass('toggle').find('div.updated, div.error').effect('highlight', {}, 1000, function(){\n                        setTimeout(function(){\n                            $container.fadeOut(2000, function(){\n                                $(this).remove();\n                            });\n                        }, 15000);\n                    });\n                });\n                this.div = [];\n            }\n        },\n        confirm: function(e) {\n            var $btn = $(this);\n            var message = $btn.attr('data-gianism-confirmation');\n            var labels  = $btn.attr('data-gianism-target').split(',');\n            e.preventDefault();\n            GianSays.confirmDialog( message, labels, $btn.attr('href') );\n        },\n        confirmDialog: function( message, labels, url ) {\n          var list = $.map(labels, function(item, index){\n              return '<li>' + item + '</li>';\n          }).join('');\n          var $markup = $('<div class=\"wpg-confirm-container\">' +\n              '<div class=\"wpg-confirm-body\">' +\n                '<div class=\"wpg-confirm-title\">' + GianismHelper.confirmLabel + '</div>' +\n                '<div class=\"wpg-confirm-content\">' +\n                   '<p>' + message + '</p>' +\n                   '<ul>' + list + '</ul>' +\n                '</div>' +\n                '<div class=\"wpg-confirm-footer\">' +\n                  '<button class=\"deny\">' + GianismHelper.btnCancel + '</button>' +\n                  '<button class=\"confirm\">' + GianismHelper.btnConfirm + '</button>' +\n                '</div>' +\n              '</div>' +\n            '</div>');\n          $('body').append($markup);\n          $markup.on('click', 'button', function(){\n              if($(this).hasClass('deny')){\n                  $markup.remove();\n              }else if($(this).hasClass('confirm')){\n                  window.location.href = url;\n              }\n          });\n        }\n    };\n\n    // Flush message if set.\n    GianSays.grabMessage();\n    GianSays.flushMessage();\n\n    // Debug mode.\n    var match = /gianism_debug_message=(updated|error)/.exec(window.location.hash);\n    if(match){\n        GianSays.pushMsg('This is a test message. Just check for that.', match[1]);\n        GianSays.flushMessage();\n    }\n\n    // Confirmation button.\n    $('.wpg-button[data-gianism-confirmation]').click(GianSays.confirm);\n\n});\n"]}